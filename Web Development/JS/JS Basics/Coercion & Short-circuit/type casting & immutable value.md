# 타입 변환과 불변 값

값의 명시적(의도적인) 타입 변환과 암묵적(비의도적인) 타입 변환은 기존 원시 값을 직접 변경하는 것이 아닌 타입 변환을 통해 새로운 [**원시 값**]()을 생성하는 것이다. 원시 값은 변경 불가능한 값(불변값, Immutable Value)이므로 변경할 수 없다

### 목차

- [1 원시 값의 타입 변환과 불변 값](#1-원시-값의-타입-변환과-불변-값)
- [2 명시적 타입 변환과 불변 값](#2-명시적-타입-변환과-불변-값)
- [3 암묵적 타입 변환과 불변 값](#3-암묵적-타입-변환과-불변-값)

***

<br>

## 1 원시 값의 타입 변환과 불변 값

원시 값은 왜 불변 값이라 할까? 메모리의 동작 원리를 복기해보자:

```jsx
var num = 10;
num = 20; 
```

<img src="https://user-images.githubusercontent.com/92138751/231477423-251df17e-5e74-4b1e-bee9-05bcbc010513.png" style="max-width: 100%" align="center">

JS에서는 [**변수 선언**](https://www.notion.so/d6cf814d868c412a94346c3f2e07db1a), [**값의 할당**및]() [**재할당**]() 시 **새로운 메모리 공간을 확보하여 값을 재할당하는 방식을 사용한다**

1. 변수 `num` 선언 시 JS 엔진은 변수 값을 저장할 확보된 메모리 공간에 `undefined`를 자동으로 할당해서 메모리를 초기화한다.
2. 그 이후 변수 `num`에 숫자 값 `10`을 할당한다.
3. 그리고 다시 변수 `num`에 숫자 값 `20`을 재할당한다. 이때 변수 `num`의 이전 숫자 값 `10`이 저장된 메모리에 숫자 값 `20`을 재할당하는 것이 아니라 새로운 메모리 공간을 찾아 숫자 값 `20`을 저장하고 변수(식별자) `num`과 연결되어 있던 메모리 주소 정보만 변경되는 것이다. **즉, 기존 숫자 값 `10`이 삭제가 되거나 없어지는게 아니기 때문에 원시 값은 불변하다는 것이다**

<br>

## 2 명시적 타입 변환과 불변값

아래 예시를 통해 명시적 타입 변환에도 원시 값은 불변하다는 것을 살펴보자:

```jsx
var num = 10; 

// 변수 num의 숫자 값을 문자열 값으로 의도적으로 형변환한다
num.toString(); // → '10'

console.log(num, typeof num); // → 10 'number'
```

변수 `num`의 값을 `toString()` 메서드를 통해 문자열 타입으로 형변환시켜 새로운 원시 값(문자열 타입)을 생성하는 것이지, 변수 `num`에 할당된 본래의 숫자 값을 직접 변경하는 것이 아니다. 위 예제에서는 명시적 타입 변환을 통해 생성된 문자열 값 `‘10’`은 어디에도 할당되지 않는다

<br>

## 3 암묵적 타입 변환과 불변값

아래 암묵적 타입 변환의 예시도 살펴보자:

```jsx
var num = 10; 
num + ''; // → '10'

console.log(num, typeof num); // → 10 'number'
```

JS 엔진은 표현식 `num + ‘’`를 평가하기 위해 변수 `num`의 숫자 값 `10`을 암묵적으로 타입 변환하고, 평가 결과로 새로운 문자열 값 `‘10’`을 생성한다. 그렇다고 암묵적 타입 변환으로 생성된 문자열 `‘10’`을 변수 `num`에 재할당하지는 않는다. 즉, 암묵적 타입 변환은 기존 변수 값에 새로운 값을 재할당하여 변경하는 것이 아니다. 또한, 암묵적 타입 변환으로 새롭게 생성된 값은 단 한번 사용되고 버려진다

<br>

***

### 참고

- [모던 자바스크립트 Deep Dive](http://www.yes24.com/Product/Goods/92742567)

